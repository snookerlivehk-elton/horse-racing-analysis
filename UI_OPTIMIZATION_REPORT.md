# 前端 UI 及功能優化與部署可行性報告 (v1.6.5)

## 1. 現狀評估 (Current Status)

### 已完成功能
- **資料顯示**: 修正了馬匹「季內獎金」及「總獎金」的顯示問題 (支援 HKJC 的 `*` 號標記)。
- **篩選功能**: 已將篩選器整合至表格標題 (Header) 中。
  - 支援欄位: 名次 (Rank)、路程 (Distance)、場地 (Venue)、班次 (Class)、騎師 (Jockey)、練馬師 (Trainer)。
  - 互動方式: 點擊標題文字即可開啟下拉選單。
- **圖表分析**: 已整合 Chart.js 顯示往績走勢。

### 待優化項目 (Room for Optimization)

#### A. 用戶體驗 (UX)
1.  **排序功能 (Sorting)**:
    -   目前表格僅支援預設排序 (依日期)。
    -   **建議**: 實作點擊標題進行升序/降序排列 (如依名次、獨贏賠率、負磅排序)。
2.  **進階篩選**:
    -   目前僅支援單選 (Single Select)。
    -   **建議**: 支援多選 (如同時選擇 "沙田" 和 "跑馬地") 或 數值範圍篩選 (如 賠率 < 5.0)。
3.  **響應式設計 (Mobile Responsiveness)**:
    -   目前表格在手機版可能需要橫向捲動。
    -   **建議**: 固定首欄 (場次/名次) 或轉換為卡片式佈局 (Card View) 以適應手機閱讀。

#### B. 視覺呈現 (Visual)
1.  **狀態標籤**: 為 "勝出" (1st) 或 "上名" (2nd/3rd) 添加更明顯的背景色塊。
2.  **趨勢圖**: 增加 "體重變化" 或 "評分趨勢" 的圖表切換功能。

## 2. 部署可行性 (Deployment Feasibility)

### 技術棧相容性
-   **前端**: 使用 EJS 模板 + 原生 JavaScript，無須額外編譯步驟，部署風險低。
-   **後端**: Node.js + Express，已在 Railway 運行穩定。
-   **資料庫**: PostgreSQL (Prisma)，Schema 已更新並同步。

### 部署風險評估
-   **低風險**: 前端 UI 修改 (horse.ejs) 僅影響顯示層，不影響後端邏輯。
-   **中風險**: 爬蟲邏輯更新 (hkjcScraper.ts) 需確保 HKJC 網站結構無變動。已加入日誌 (Logging) 以便追蹤。

## 3. 下一步建議 (Next Steps)

1.  **立即執行**: 推送 v1.6.5 更新至 Railway，驗證獎金顯示與篩選器功能。
2.  **後續開發**: 
    -   實作 "晨操資料庫" (Trackwork Database) 與 "權重評分系統"。
    -   根據用戶反饋微調 UI (如字體大小、顏色對比)。

---
**版本**: 1.6.5
**日期**: 2026-02-01
